server {
  listen 80;
  server_name _;

  root /usr/share/nginx/html;
  index index.html;

  # No cache for HTML (index.html) so clients always fetch newest entrypoint
  location = /index.html {
    add_header Cache-Control "no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0";
    try_files /index.html =404;
  }

  # No cache for env.js (if you use runtime env injection)
  location = /env.js {
    add_header Cache-Control "no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0";
    try_files /env.js =404;
  }

  # Static assets (fingerprinted) -> long cache
  location /assets/ {
    # allows CDN / browser caching for fingerprinted files
    add_header Cache-Control "public, max-age=31536000, immutable";
    try_files $uri $uri/ =404;
  }

  # Fallback for everything else (SPA routing)
  location / {
    try_files $uri $uri/ /index.html;
  }
}
